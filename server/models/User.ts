import mongoose, { Document, Schema } from "mongoose";

interface RefreshToken {
  token: string;
  createdAt?: Date;
}

export interface IUser extends Document {
  username: string;
  password: string;
  refreshToken: RefreshToken;
}

const userSchema = new Schema<IUser>(
  {
    username: { type: String, required: true, unique: true },
    password: { type: String, required: true },
    refreshToken: {
      token: { type: String, required: true },
      createdAt: { type: Date, default: Date.now },
    }
  },
  { timestamps: true }
);

export default mongoose.model<IUser>("User", userSchema);

//üîπ 1. const mongoose = require("mongoose");
// require("mongoose") ‚Äî —Ü–µ –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –±—ñ–±–ª—ñ–æ—Ç–µ–∫–∏ Mongoose, —è–∫–∞ –¥–æ–ø–æ–º–∞–≥–∞—î –ø—Ä–∞—Ü—é–≤–∞—Ç–∏ –∑ –±–∞–∑–æ—é –¥–∞–Ω–∏—Ö MongoDB —É –∑—Ä—É—á–Ω–∏–π —Å–ø–æ—Å—ñ–±.

// üîπ 2. const UserSchema = new mongoose.Schema({ ... });
// –¶–µ–π —Ä—è–¥–æ–∫ —Å—Ç–≤–æ—Ä—é—î —Å—Ö–µ–º—É (Schema) ‚Äî —à–∞–±–ª–æ–Ω, —è–∫–∏–π –æ–ø–∏—Å—É—î, —è–∫—ñ –ø–æ–ª—è –º–∞—î –º–∞—Ç–∏ –¥–æ–∫—É–º–µ–Ω—Ç —É –∫–æ–ª–µ–∫—Ü—ñ—ó MongoDB (–≤ –Ω–∞—à–æ–º—É –≤–∏–ø–∞–¥–∫—É "–∫–æ—Ä–∏—Å—Ç—É–≤–∞—á").

// –î–µ—Ç–∞–ª—å–Ω—ñ—à–µ:
// new mongoose.Schema({...}) ‚Äî –≤–∏–∫–ª–∏–∫–∞—î–º–æ –∫–ª–∞—Å Schema –∑ mongoose —ñ –ø–µ—Ä–µ–¥–∞—î–º–æ –π–æ–º—É –æ–±'—î–∫—Ç –∑ –æ–ø–∏—Å–æ–º –ø–æ–ª—ñ–≤.

// üîπ 3. –û—Å—Ç–∞–Ω–Ω—ñ–π —Ä—è–¥–æ–∫:

// module.exports = mongoose.model("User", UserSchema);
// –¶–µ–π —Ä—è–¥–æ–∫ —Å—Ç–≤–æ—Ä—é—î –ú–û–î–ï–õ–¨ –Ω–∞ –æ—Å–Ω–æ–≤—ñ —Å—Ö–µ–º–∏, —è–∫—É –º–∏ —â–æ–π–Ω–æ –Ω–∞–ø–∏—Å–∞–ª–∏.

// –ü–æ—è—Å–Ω–µ–Ω–Ω—è:
// mongoose.model(...) ‚Äî —Å—Ç–≤–æ—Ä—é—î –º–æ–¥–µ–ª—å (—â–æ—Å—å –Ω–∞ –∫—à—Ç–∞–ª—Ç "–∫–ª–∞—Å—É" –¥–ª—è –∫–æ–ª–µ–∫—Ü—ñ—ó –≤ –±–∞–∑—ñ).

// "User" ‚Äî –Ω–∞–∑–≤–∞ –º–æ–¥–µ–ª—ñ (—ñ MongoDB –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ —Å—Ç–≤–æ—Ä–∏—Ç—å –∫–æ–ª–µ–∫—Ü—ñ—é –∑ –Ω–∞–∑–≤–æ—é users ‚Äî –¥–æ–¥–∞—î s).

// UserSchema ‚Äî –Ω–∞—à–∞ —Å—Ö–µ–º–∞, —è–∫–∞ –æ–ø–∏—Å—É—î, —è–∫ –≤–∏–≥–ª—è–¥–∞—î –æ–¥–∏–Ω "user".

// üì¶ module.exports = ... ‚Äî –º–∏ –µ–∫—Å–ø–æ—Ä—Ç—É—î–º–æ –º–æ–¥–µ–ª—å, —â–æ–± –ø–æ—Ç—ñ–º –ø—ñ–¥–∫–ª—é—á–∞—Ç–∏ —ó—ó –≤ —ñ–Ω—à–∏—Ö —Ñ–∞–π–ª–∞—Ö —ñ –ø–∏—Å–∞—Ç–∏:
